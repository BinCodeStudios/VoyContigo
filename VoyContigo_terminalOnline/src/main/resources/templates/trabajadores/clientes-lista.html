<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Clientes - VoyContigo</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">
		 <!-- Font Awesome -->
		 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
		 <link rel="stylesheet" href="/css/style.css">
		 <link rel="stylesheet" href="/css/login.css">
		 <link rel="stylesheet" href="/css/dashboard.css">
		 <link rel="stylesheet" href="/css/style.css">
		 <style>
		         /* Estilos para el carrusel con imágenes largas */
		         .info-carousel .carousel-item {
		             padding: 10px 20px;
		         }
		         .info-card {
		             background: #fff;
		             border-radius: 8px;
		             box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
		             overflow: hidden;
		             text-align: center;
		             margin: 0 auto;
		             max-width: 1000px;
		         }
		         .info-card img {
		             width: 100%;
		             height: 250px; /* Más larga */
		             object-fit: cover;
		             object-position: center;
		         }
		         .info-card .content {
		             padding: 15px;
		         }
		         .info-card .btn {
		             background-color: #007bff;
		             color: white;
		             padding: 8px 16px;
		             border-radius: 4px;
		             text-decoration: none;
		         }
		         .info-card .btn:hover {
		             background-color: #0056b3;
		         }

		         /* Cards de funciones optimizadas - solo agrandar */
		         .function-cards {
		             display: flex;
		             flex-wrap: wrap;
		             justify-content: center;
		             gap: 15px;
		             margin-top: 30px;
		         }
		         .function-card {
		             position: relative;
		             width: 120px;
		             height: 120px;
		             border-radius: 8px;
		             overflow: hidden;
		             box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
		             transition: all 0.3s ease;
		             cursor: pointer;
		         }
		         .function-card:hover {
		             transform: scale(1.1); /* Solo se agranda */
		             box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
		         }
		         .function-card img {
		             width: 100%;
		             height: 100%;
		             object-fit: cover;
		         }
		         .function-card .overlay {
		             position: absolute;
		             top: 0;
		             left: 0;
		             width: 100%;
		             height: 100%;
		             background: rgba(0, 0, 0, 0.6);
		             color: white;
		             display: flex;
		             flex-direction: column;
		             justify-content: center;
		             align-items: center;
		             opacity: 0;
		             transition: opacity 0.3s ease;
		         }
		         .function-card:hover .overlay {
		             opacity: 1;
		         }
		         .function-card .overlay h5 {
		             margin: 0;
		             font-size: 14px;
		         }
		         .function-card .overlay p {
		             font-size: 12px;
		             margin: 5px 0;
		         }
		         .function-card .overlay a {
		             color: #fff;
		             text-decoration: underline;
		             font-size: 12px;
		         }

		         /* Tabla */
		         .table th, .table td {
		             vertical-align: middle;
		         }
		         .table .btn-sm {
		             padding: 5px 10px;
		             font-size: 12px;
		         }

		         /* Responsive */
		         @media (max-width: 768px) {
		             .info-card img {
		                 height: 180px;
		             }
		             .function-card {
		                 width: 100px;
		                 height: 100px;
		             }
		             .function-card .overlay h5 {
		                 font-size: 12px;
		             }
		             .function-card .overlay p {
		                 font-size: 10px;
		             }
		             .function-card .overlay a {
		                 font-size: 10px;
		             }
		         }
		     </style>

</head>
<body>

	<!-- Navbar -->
	  <nav class="navbar navbar-expand-lg navbar-light">
	      <div class="container">
	          <a class="navbar-brand" th:href="@{/admin/dashboard}">
	              <img th:src="@{/img/VoyContigoLogo.png}" alt="Voy Contigo">
	          </a>
	          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav">
	              <span class="navbar-toggler-icon"></span>
	          </button>
	          <div class="collapse navbar-collapse" id="navbarNav">
	              <ul class="navbar-nav ml-auto">
					<li class="nav-item">
					                 <span class="nav-link" th:text="'Bienvenido, ' + ${nombre}"></span>
					             </li>
					             <li class="nav-item">
					                 <a class="nav-link active" th:href="@{/trabajadores/taquillero/dashboard}">Ver Tickets</a>
					             </li>
					             <li class="nav-item">
					                 <a class="nav-link" th:href="@{/trabajadores/taquillero/clientes}">Ver Clientes</a>
					             </li>
					             <li class="nav-item">
					                 <a class="nav-link" th:href="@{/trabajadores/taquillero/agregar-ticket}">Agregar Ticket</a>
					             </li>
					             <li class="nav-item">
					                 <a class="nav-link text-danger" th:href="@{/trabajadores/logout}">Cerrar Sesión</a>
					             </li>
	              </ul>
	          </div>
	      </div>
	  </nav>

    <!-- Main Content -->
    <div class="container mx-auto p-6">
        <h1 class="text-3xl font-bold mb-6">Lista de Clientes</h1>

        <!-- Mensaje de Alerta -->
        <div th:if="${mensaje}" class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative mb-6">
            <span th:text="${mensaje}"></span>
        </div>

		<!-- Mensaje de Alerta -->
		          <div th:if="${mensaje}" class="alert alert-warning mt-4" role="alert">
		              <span th:text="${mensaje}"></span>
		          </div>

		          <!-- Buscador de Clientes -->
		          <div class="mt-5">
		              <h2 class="text-center mb-4">Buscar Cliente por ID</h2>
		              <form th:action="@{/trabajadores/taquillero/clientes}" method="get" class="form-inline justify-content-center">
		                  <div class="form-group mb-2">
		                      <input type="text" name="clienteId" placeholder="ID del Cliente" 
		                             class="form-control" 
		                             th:value="${clienteId}">
		                  </div>
		                  <button type="submit" class="btn btn-primary mb-2 ml-2">
		                      Buscar
		                  </button>
		              </form>
		          </div>

		          <!-- Tabla de Clientes -->
		          <div class="mt-5">
		              <h2 class="text-center mb-4">Clientes</h2>
		              <div th:if="${not #lists.isEmpty(clientes)}">
		                  <div class="table-responsive">
		                      <table class="table table-bordered table-hover">
		                          <thead class="thead-dark">
		                              <tr>
		                                  <th>ID Cliente</th>
		                                  <th>Nombre Completo</th>
		                                  <th>Correo</th>
		                                  <th>Tickets</th>
		                                  <th>Acciones</th>
		                              </tr>
		                          </thead>
		                          <tbody>
		                              <tr th:each="cliente : ${clientes}">
		                                  <td th:text="${cliente.id}"></td>
		                                  <td th:text="${cliente.nombreCompleto}"></td>
		                                  <td th:text="${cliente.correo}"></td>
		                                  <td>
		                                      <div th:with="tickets=${@ticketRepository.findByClienteId(cliente.id)}">
		                                          <span th:if="${#lists.isEmpty(tickets)}">Ningún ticket</span>
		                                          <ul th:if="${not #lists.isEmpty(tickets)}" class="list-unstyled">
		                                              <li th:each="ticket : ${tickets}">
		                                                  <a th:href="@{/trabajadores/taquillero/ticket/{ticketId}/pdf(clienteId=${cliente.id},ticketId=${ticket.id})}"
		                                                     class="text-success">
		                                                      <i class="fas fa-download"></i> Ticket <span th:text="${ticket.id}"></span> (Asiento: <span th:text="${ticket.asiento}"></span>)
		                                                  </a>
		                                              </li>
		                                          </ul>
		                                      </div>
		                                  </td>
		                                  <td>
		                                      <a th:href="@{/trabajadores/taquillero/clientes/tickets/{id}(id=${cliente.id})}" 
		                                         class="btn btn-sm btn-primary">
		                                          <i class="fas fa-eye"></i> Ver Tickets
		                                      </a>
		                                  </td>
		                              </tr>
		                          </tbody>
		                      </table>
		                  </div>
		              </div>
		              <p th:if="${#lists.isEmpty(clientes)}" class="text-center text-muted">
		                  No se encontraron clientes.
		              </p>
		          </div>
		      </div>
		
    <!-- Footer -->
	<footer>
	        <div class="container">
	            <div class="row">
	                <div class="col-md-4 text-center text-md-left mb-3">
	                    <img th:src="@{/img/VoyContigoLogo.png}" alt="Voy Contigo" class="log">
	                    <p class="small">© Voy Contigo</p>
	                </div>
	                <div class="col-md-8 text-center text-md-right">
	                    <div class="footer-links">
	                        <a href="#">Enlaces de interés</a>
	                        <a href="#">Contacto</a>
	                        <a href="#">Mapa del sitio</a>
	                        <a href="#">Política de privacidad</a>
	                    </div>
	                    <div class="footer-social">
	                        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
	                        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
	                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
	                        <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
	                    </div>
	                </div>
	            </div>
	            <div class="copyright">
	                © 2025 Terminal de Transporte de Bogotá. Todos los derechos reservados.
	            </div>
	        </div>
	    </footer>

	    <!-- Bootstrap 4 JS Dependencies -->
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.slim.min.js"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.min.js"></script>
	</body>
	</html>